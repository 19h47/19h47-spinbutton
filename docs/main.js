!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SpinButton=e():t.SpinButton=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>l});const i=(t,e,i)=>Math.min(Math.max(t,e),i),s=(t,e,i)=>{if(null!==t)return e===i?t.setAttribute("disabled","true"):t.removeAttribute("disabled")},n=(t,e)=>e?`${t} ${t<=1?e.single:e.plural}`:t.toString(),a={text:{single:"item",plural:"items"},step:1,delay:20};class l{constructor(t,e={}){this.handleClick=t=>this.setValue(t),this.handleInput=t=>{const{target:e}=t,i=parseInt(e.value,10)||0;this.setValue(i)},this.handleKeydown=t=>{const e={ArrowUp:()=>this.setValue(this.value.now+this.options.step),ArrowRight:()=>this.setValue(this.value.now+this.options.step),ArrowDown:()=>this.setValue(this.value.now-this.options.step),ArrowLeft:()=>this.setValue(this.value.now-this.options.step),PageDown:()=>this.setValue(this.value.now-5*this.options.step),PageUp:()=>this.setValue(this.value.now+5*this.options.step),Home:()=>this.setValue(this.value.min),End:()=>this.setValue(this.value.max),default:()=>!1};return(e[t.key||t.code]||e.default)()},this.debounceDispatchEvent=null,this.el=t,this.options={...a,...e},this.$input=this.el.querySelector('input[type="text"]'),this.$increase=this.el.querySelector(".js-increase"),this.$decrease=this.el.querySelector(".js-decrease");const i=parseInt(this.el.getAttribute("aria-valuenow")||"0",10);this.text=(()=>{try{return JSON.parse(this.el.getAttribute("data-spinbutton-text"))||e.text}catch(t){return e.text}})(),this.options.step=parseInt(this.el.getAttribute("data-spinbutton-step")||this.options.step.toString(),10),this.options.delay=parseInt(this.el.getAttribute("data-spinbutton-delay")||this.options.delay.toString(),10),this.value={min:parseInt(this.el.getAttribute("aria-valuemin")||"0",10),max:parseInt(this.el.getAttribute("aria-valuemax")||"0",10),now:i,text:n(i,this.text).toString()},this.handleClick=this.handleClick.bind(this)}init(){this.setValue(this.value.now,!1),this.initEvents()}initEvents(){this.el.addEventListener("keydown",this.handleKeydown),this.$increase&&this.$increase.addEventListener("click",(()=>this.handleClick(this.value.now+this.options.step))),this.$decrease&&this.$decrease.addEventListener("click",(()=>this.handleClick(this.value.now-this.options.step))),this.$input&&this.$input.addEventListener("input",this.handleInput)}setMin(t,e=!0){this.value.min=parseInt(t.toString(),10),this.el.setAttribute("aria-valuemin",t.toString()),this.setValue(this.value.now,e)}setMax(t,e=!0){this.value.max=parseInt(t.toString(),10),this.el.setAttribute("aria-valuemax",t.toString()),this.setValue(this.value.now,e)}setValue(t,e=!0){const a=parseInt(t.toString(),10);var l,o;this.value.min&&this.value.max||this.value.max?this.value.now=i(a,this.value.min,this.value.max):this.value.min?this.value.now=i(a,Number.MIN_SAFE_INTEGER,this.value.max):this.value.now=i(a,Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.value.text=n(this.value.now,this.text),this.value.max&&s(this.$increase,this.value.now,this.value.max),this.value.min&&s(this.$decrease,this.value.now,this.value.min),l=this.el,o={"aria-valuenow":this.value.now.toString(),"aria-valuetext":this.value.text},Object.keys(o).forEach((t=>l.setAttribute(t,o[t]))),this.$input.value=this.value.now.toString(),e&&(this.debounceDispatchEvent||(this.debounceDispatchEvent=this.debounce((()=>{((t,e={})=>{const i=new CustomEvent(`SpinButton.${"change"}`,{bubbles:!1,cancelable:!0,detail:e});t.dispatchEvent(i)})(this.el,{value:this.value.now})}),this.options.delay)),this.debounceDispatchEvent())}debounce(t,e){let i=null;return()=>{null!==i&&clearTimeout(i),i=window.setTimeout((()=>{t(),i=null}),e)}}}return e})()));